"use strict";(self["webpackChunkproject_myhome"]=self["webpackChunkproject_myhome"]||[]).push([[505],{6505:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var l=a(3396),i=a(9242),s=a(7139);const o=e=>((0,l.dD)("data-v-02afc0f7"),e=e(),(0,l.Cn)(),e),r={class:"sub_wrap"},n={class:"mW1200"},d=o((()=>(0,l._)("h3",null,"게시판 글쓰기",-1))),h=o((()=>(0,l._)("p",{class:"colRed"},"* 모든 입력란을 기재하셔야 글이 작성됩니다.",-1))),c={class:"row gtr-uniform"},p={class:"col-12"},m={class:"col-6 col-12-xsmall"},u={class:"col-6 col-12-xsmall"},g={class:"col-12"},y=o((()=>(0,l._)("option",{value:"",selected:"selected"},"글 종류 선택",-1))),_=o((()=>(0,l._)("option",{value:"[일반]"},"일반게시글",-1))),w=o((()=>(0,l._)("option",{value:"[유머]"},"유머게시글",-1))),v=o((()=>(0,l._)("option",{value:"[기타]"},"기타게시글",-1))),E=[y,_,w,v],f={class:"col-12"},k={class:"col-4 col-12-small"},b=o((()=>(0,l._)("label",{for:"demo-priority-low"},"이미지 파일 추가",-1))),x={class:"col-8 col-12-small"},U=o((()=>(0,l._)("label",{for:"demo-priority-normal"},"이미지 파일 추가 안함",-1))),I={class:"ImgWrap row col-12"},A={class:"col-8 col-12-small"},V=["value"],N={class:"col-4 col-12-small"},q=o((()=>(0,l._)("label",{for:"image-file",class:"button"},"파일찾기",-1))),$={class:"col-12"},B={key:0,class:"image-preview"},C=o((()=>(0,l._)("span",null,"삭제버튼",-1))),F=[C],P={class:"col-12"},L={class:"col-12 col-12-small"},R=o((()=>(0,l._)("label",{for:"agree"},"게시물이 공유되는 것에 동의합니다.",-1))),S={class:"col-12"},j={class:"actions"};function z(e,t,a,o,y,_){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("section",r,[(0,l._)("div",n,[d,h,(0,l._)("div",c,[(0,l._)("div",p,[(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>y.title=e),id:"board-tit",placeholder:"제목을 입력하세요."},null,512),[[i.nr,y.title]])]),(0,l._)("div",m,[(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>y.author=e),id:"board-name",placeholder:"이름을 입력하세요."},null,512),[[i.nr,y.author]])]),(0,l._)("div",u,[(0,l.wy)((0,l._)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>y.email=e),id:"board-mail",placeholder:"이메일을 입력하세요."},null,512),[[i.nr,y.email]])]),(0,l._)("div",g,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>y.type=e)},E,512),[[i.bM,y.type]])]),(0,l._)("div",f,[(0,l.wy)((0,l._)("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=e=>y.password=e),maxlength:"6",id:"board-pass",placeholder:"암호를 입력하세요.(4~6글자)"},null,512),[[i.nr,y.password]])]),(0,l._)("div",k,[(0,l.wy)((0,l._)("input",{type:"radio",id:"demo-priority-low",name:"demo-priority",class:"trueImg","onUpdate:modelValue":t[5]||(t[5]=e=>y.chkImg=e),value:!0},null,512),[[i.G2,y.chkImg]]),b]),(0,l._)("div",x,[(0,l.wy)((0,l._)("input",{type:"radio",id:"demo-priority-normal",name:"demo-priority",checked:"","onUpdate:modelValue":t[6]||(t[6]=e=>y.chkImg=e),value:!1},null,512),[[i.G2,y.chkImg]]),U]),(0,l.wy)((0,l._)("div",I,[(0,l._)("div",A,[(0,l._)("input",{type:"text",class:"__fileName",value:y.imgName,placeholder:"이미지명",readonly:""},null,8,V)]),(0,l._)("div",N,[(0,l._)("input",{type:"file",id:"image-file",accept:"image/*",onChange:t[7]||(t[7]=(...e)=>_.handleImageUpload&&_.handleImageUpload(...e))},null,32),q]),(0,l._)("div",$,[y.imagePreviewUrl?((0,l.wg)(),(0,l.iD)("div",B,[(0,l._)("p",{class:"previewImgBg positionR",style:(0,s.j5)(`background-image: url(${y.imagePreviewUrl})`)},[(0,l._)("button",{class:"restPreview",type:"reset",onClick:t[8]||(t[8]=(...e)=>_.resetImage&&_.resetImage(...e))},F)],4)])):(0,l.kq)("",!0)])],512),[[i.F8,y.chkImg]]),(0,l._)("div",P,[(0,l.wy)((0,l._)("textarea",{name:"demo-message","onUpdate:modelValue":t[9]||(t[9]=e=>y.contents=e),id:"demo-message",placeholder:"내용을 입력 해주세요.",rows:"6",onresize:"none"},null,512),[[i.nr,y.contents]])]),(0,l._)("div",L,[(0,l.wy)((0,l._)("input",{type:"checkbox",id:"agree",name:"agree",checked:"","onUpdate:modelValue":t[10]||(t[10]=e=>y.chkAgree=e)},null,512),[[i.e8,y.chkAgree]]),R]),(0,l._)("div",S,[(0,l._)("ul",j,[(0,l._)("li",null,[(0,l._)("button",{onClick:t[11]||(t[11]=e=>_.fnSave()),type:"submit",class:(0,s.C_)(["primary",y.titEntered&&y.authorEntered&&y.emailEntered&&y.passwordEntered&&y.typeEntered&&y.contentsEntered&&y.chkAgree?"":"disable"])},"저장",2)]),(0,l._)("li",null,[(0,l._)("button",{onClick:t[12]||(t[12]=(...e)=>_.fnList&&_.fnList(...e)),type:"reset"},"취소")])])])])])])])}a(7658),a(2062);var D={data(){return{idx:this.$route.query.idx,email:"",type:"",chkImg:!1,title:"",author:"",contents:"",imagePreviewUrl:"",imgName:"",created_at:"",password:"",emailRegex:/^[A-Za-z0-9_\\.\\-]+@[A-Za-z0-9\\-]+\.[A-Za-z0-9\\-]+/,allSpecial:/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/g,notNumber:/[0-9]/g,titEntered:!1,authorEntered:!1,emailEntered:!1,typeEntered:!1,contentsEntered:!1,passwordEntered:!1,chkAgree:!1}},computed:{requestBody(){return this.$route.query}},watch:{title:{handler(e){console.log(e),this.allSpecial.test(e)&&(console.log("제목에 특수문자 입력됨"),alert("제목에 특수문자는 입력 될 수 없습니다."),this.title=e.substring(0,e.length-1),this.titEntered=!1),e.length>2&&(this.titEntered=!0)},deep:!0,immediate:!0},author:{handler(e){console.log(e),this.allSpecial.test(e)&&(console.log("이름에 특수문자 입력됨"),alert("이름에 특수문자는 입력 될 수 없습니다."),this.author=e.substring(0,e.length-1),this.authorEntered=!1),this.notNumber.test(e)&&(console.log("작성자에 숫자입력"),alert("작성자명에 숫자를 입력할 수 없습니다."),this.author=e.substring(0,e.length-1),this.authorEntered=!1),e.length>2&&(this.authorEntered=!0)},deep:!0,immediate:!0},password:{handler(e){console.log(e),this.allSpecial.test(e)&&(console.log("암호에 특수문자 입력됨"),alert("암호에는 특수문자를 사용할 수 없습니다."),this.password=e.substring(0,e.length-1),this.passwordEntered=!1),e.length>3&&(this.passwordEntered=!0)},deep:!0,immediate:!0},email:{handler(e){console.log(e),this.emailRegex.test(e)?this.emailEntered=!0:console.log("emailEntered",this.emailEntered)},deep:!0,immediate:!0},type:{handler(e){console.log(e),this.typeEntered=""!=e,console.log("typeEntered",this.typeEntered)},deep:!0,immediate:!0},contents:{handler(e){e.length>3&&(this.contentsEntered=!0),console.log("contents",e)},deep:!0,immediate:!0},chkAgree:{handler(e){this.chkAgree=!!e,console.log("this.chkAgree",this.chkAgree),console.log("titEntered,authorEntered,emailEntered,typeEntered,contentsEntered,chkAgree",this.titEntered,this.authorEntered,this.passwordEntered,this.emailEntered,this.typeEntered,this.contentsEntered,this.chkAgree)},deep:!0,immediate:!0}},mounted(){this.fnGetView(),console.log("type",this.type),console.log("this.idx",this.idx)},methods:{fnGetView(){void 0!==this.idx&&this.$axios.get(this.$serverUrl+"/board/"+this.idx,{params:this.requestBody}).then((e=>{this.title=e.data.title,this.type=e.data.type,this.author=e.data.author,this.password=e.data.password,this.contents=e.data.contents,this.imgName=e.data.fileName})).catch((e=>{console.log(e)}))},fnList(){delete this.requestBody.idx,this.$router.push({path:"./BoardList",query:this.requestBody})},fnView(e){this.requestBody.idx=e,this.$router.push({path:"../Board/BoardView",query:this.requestBody})},submitForm(){console.log("게시물 저장")},handleImageUpload(e){this.imageFile=e.target.files[0],this.imgName=e.target.files[0].name,this.imagePreviewUrl=URL.createObjectURL(this.imageFile),console.log("handleImgUp",this.imageFile,this.imgName,this.imagePreviewUrl)},resetImage(){this.imageFile=null,this.imagePreviewUrl="",this.imgName=""},fnSave(){const e=this.$serverUrl+"/board",t=new FormData;t.append("title",this.title),t.append("author",this.author),t.append("email",this.email),t.append("type",this.type),t.append("password",this.password),t.append("contents",this.contents),t.append("chkAgree",this.chkAgree),this.chkImg?t.append("file",this.imageFile):this.chkImg||t.append("file",""),void 0===this.idx?this.$axios.post(e,t,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{alert("글이 저장되었습니다."),console.log("업로드 내용",e),this.fnView(e.data.idx)})).catch((e=>{e.message.indexOf("Network Error")>-1?alert("네트워크가 원활하지 않습니다.\n잠시 후 다시 시도해주세요."):alert("err_2번")})):this.$axios.post(e,t,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{alert("글이 수정 되었습니다."),this.fnView(e.data.idx)})).catch((e=>{e.message.indexOf("Network Error")>-1&&alert("네트워크가 원활하지 않습니다.\n잠시 후 다시 시도해주세요.")}))}}},G=a(89);const Z=(0,G.Z)(D,[["render",z],["__scopeId","data-v-02afc0f7"]]);var O=Z}}]);
//# sourceMappingURL=505.e0a4ca7e.js.map